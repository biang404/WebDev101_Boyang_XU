<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Exercices - WebDev101</title><!-- ÂºïÂÖ•ÂÖ®Â±Ä CSS --><link rel="stylesheet" href="/styles/global.css"><style>html{scroll-behavior:smooth}body{margin:0;padding:0;font-family:sans-serif}nav{position:fixed;top:0;left:0;width:100%;height:60px;background-color:#fff;z-index:1000;border-bottom:1px solid #eee}.exercise-layout{display:flex;min-height:100vh}.sidebar{width:250px;padding:1rem;border-right:1px solid #eee;position:sticky;top:60px;height:calc(100vh - 60px);overflow-y:auto;background:#f9f9f9}.sidebar h2{font-size:1.2rem;margin-bottom:1rem}.sidebar ul{list-style:none;padding:0;margin:0}.sidebar li{margin-bottom:.5rem}.sidebar a{color:#2c3e50;text-decoration:none;padding:.3rem .6rem;display:block;border-radius:6px;transition:background .3s,color .3s}.sidebar a:hover{background:#0000000d;color:#48a5e7}.sidebar a.active{font-weight:700;background:#48a5e7;color:#fff}.content{flex:1;padding:2rem;padding-top:60px}.exercise-section{scroll-margin-top:60px}.exercise-section h3{border-bottom:1px solid #ddd;padding-bottom:.5rem}:where(main) p>code,:where(main) li>code{font-size:1em!important;font-weight:400!important;color:orange!important;background:none!important;padding:0!important;border-radius:0!important;font-family:inherit!important}pre{background-color:#f6f8fa;color:#24292e;padding:1em;border-radius:6px;overflow-x:auto;font-size:.95em;line-height:1.4}pre code{background:none;color:inherit;padding:0}
nav[data-astro-cid-5knycien]{position:fixed;top:0;left:0;right:0;height:60px;background-color:#fff;z-index:1000;box-shadow:0 2px 4px #0000001a;display:flex;align-items:center}ul[data-astro-cid-5knycien]{display:flex;justify-content:space-around;align-items:center;list-style:none;margin:0;padding:0;height:100%;width:100%}a[data-astro-cid-5knycien]{text-decoration:none;color:#2c3e50;padding:.5rem 1rem;border-radius:8px;transition:all .3s ease;font-family:sans-serif}a[data-astro-cid-5knycien]:hover{color:#e4a150;background-color:#e4a1501a}li[data-astro-cid-5knycien]{flex:1;text-align:center}#game-container[data-astro-cid-sckkx6r4]{position:relative;z-index:1;padding-top:60px}nav[data-astro-cid-sckkx6r4]{position:fixed;top:0;left:0;width:100%;z-index:1000}
</style></head> <body data-astro-cid-sckkx6r4> <nav data-astro-cid-5knycien> <ul data-astro-cid-5knycien> <li data-astro-cid-5knycien><a href="/WebDev101_Boyang_XU/" data-astro-cid-5knycien>Home</a></li> <li data-astro-cid-5knycien><a href="/WebDev101_Boyang_XU/exercices/" data-astro-cid-5knycien>Exercices WebDev101</a></li> <li data-astro-cid-5knycien><a href="/WebDev101_Boyang_XU/miniprojet/" data-astro-cid-5knycien>Mini Projet - PUNTO</a></li> <li data-astro-cid-5knycien><a href="/WebDev101_Boyang_XU/projetfinal/" data-astro-cid-5knycien>Projet Final</a></li> </ul> </nav>  <main style="padding-top: 60px;" data-astro-cid-sckkx6r4>  <div class="exercise-layout"> <aside class="sidebar"> <h2>Exercices</h2> <ul> <li> <a href="#01_hello_world_ts">01 hello world typescript</a> </li><li> <a href="#02_hello_astro_typescript">02 hello astro typescript</a> </li><li> <a href="#03_modules">03 modules</a> </li><li> <a href="#04_client_server">04 client or server side</a> </li><li> <a href="#05_html_css_punto">05 html css punto</a> </li><li> <a href="#06_css_flexbox">06 CSS flexbox</a> </li><li> <a href="#07_fat_arrow">07 fat arrow</a> </li><li> <a href="#08_map_reduce">08 map reduce filter</a> </li><li> <a href="#09_objects">09 objects</a> </li><li> <a href="#10_json">10 json</a> </li><li> <a href="#11_generics">11 generics</a> </li><li> <a href="#12_exceptions">12 exceptions</a> </li><li> <a href="#13_async_await">13 async await</a> </li><li> <a href="#14_fetch">14 fetch</a> </li><li> <a href="#15_cors">15 cors</a> </li><li> <a href="#16_http_crud">16 http CRUD</a> </li><li> <a href="#17_forms">17 forms</a> </li><li> <a href="#18_web_components">18 web components</a> </li> </ul> </aside> <main class="content"> <section id="01_hello_world_ts" class="exercise-section"> <h3>01 hello world typescript</h3> <article> <h4>üìù Question :</h4> <p>
Comparez le fichier <code>hello.js</code> et <code>hello.ts</code> et d√©duisez l'√©tape de transpilation.
          √Ä quoi sert le typage fort dans TypeScript qui n'existe pas dans JavaScript ?
          R√©pondez dans un fichier texte au format markdown.
</p> <h4>‚úÖ R√©ponse :</h4> <h5>La comparaison entre le fichier <code>hello.js</code> et <code>hello.ts</code></h5> <p>
En TypeScript, nous devons sp√©cifier le type des variables (par exemple, dans <code>hello.ts</code>, le type de <code>message2</code> est <code>string</code>), alors qu'en JavaScript, ce n'est pas n√©cessaire.
          De plus, pour d√©finir une variable constante, les mots-cl√©s utilis√©s en TypeScript et en JavaScript sont √©galement diff√©rents.
</p> <h5>L'√©tape de transpilation :</h5> <p>
Le fichier <code>hello.ts</code> est √©crit en TypeScript, un langage qui ajoute des fonctionnalit√©s suppl√©mentaires √† JavaScript, notamment le typage statique.
          Lors de la transpilation (conversion du code TypeScript en JavaScript), le compilateur TypeScript (<code>tsc</code>) supprime les annotations de type et g√©n√®re un fichier JavaScript standard.
</p> <p>Exemple :</p> <pre><code class="language-ts">const message2: string = "Hello World";</code></pre> <p>devient :</p> <pre><code class="language-js">var message1 = "Hello World";</code></pre> <h5>R√¥le du typage fort dans TypeScript :</h5> <ul> <li>‚úÖ D√©tection des erreurs de type avant ex√©cution.</li> <li>‚úÖ Meilleure lisibilit√© et compr√©hension du code.</li> <li>‚úÖ Autocompl√©tion plus pr√©cise dans les IDEs.</li> <li>‚úÖ Moins de bugs li√©s aux types, meilleur maintien du code.</li> <li>‚úÖ Support des concepts avanc√©s comme les interfaces, g√©n√©riques, SOLID.</li> </ul> <p><strong>En r√©sum√© :</strong> le typage fort dans TypeScript ajoute une couche de s√©curit√© et de clart√© qui n'existe pas dans JavaScript seul.</p> </article>                   </section><section id="02_hello_astro_typescript" class="exercise-section"> <h3>02 hello astro typescript</h3>  <article> <h4>üìù Question :</h4> <p>
Cr√©ez une application web servie avec <strong>Astro</strong>, en <strong>TypeScript</strong>, qui affiche <code>"Bonjour, TypeScript!"</code> dans la page web :
</p> <ul> <li>Cr√©er programmatiquement (depuis le script TypeScript) un <code>&lt;div&gt;</code> avec un id <code>"app"</code></li> <li>Cr√©er un <code>&lt;h1&gt;</code> avec le texte <code>"Bonjour, TypeScript!"</code></li> <li>Ajouter le <code>&lt;h1&gt;</code> dans le <code>&lt;div&gt;</code></li> <li>Ajouter le <code>&lt;div&gt;</code> dans le <code>&lt;body&gt;</code></li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>
Pour accomplir cette t√¢che, suivez les instructions fournies dans le lien suivant :
<a href="https://webdev101.gitlab.io/#/02_hello_astro_typescript/" target="_blank">webdev101.gitlab.io</a>,
      puis modifiez le fichier <code>src/pages/index.astro</code> comme suit :
</p> <pre><code class="language-html">
---
---
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Astro + TypeScript&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src="../scripts/app.ts"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
    </code></pre> <p>
Ensuite, cr√©ez un dossier <code>src/scripts</code> et ajoutez un fichier nomm√© <code>app.ts</code> avec le code TypeScript suivant :
</p> <pre><code class="language-ts">
// cr√©er programmatiquement (depuis le script TypeScript) un div avec un id "app"
const appDiv = document.createElement("div");
appDiv.id = "app";

// cr√©er un h1 avec le texte "Bonjour, TypeScript!"
const heading = document.createElement("h1");
heading.textContent = "Bonjour, TypeScript!";

// ajouter le h1 dans le div
appDiv.appendChild(heading);

// ajouter le div dans le body
document.body.appendChild(appDiv);
    </code></pre> <p>
Ce script ajoutera dynamiquement une structure HTML dans la page une fois qu'elle est charg√©e, permettant √† l'utilisateur de voir le message ¬´ Bonjour, TypeScript! ¬ª g√©n√©r√© par TypeScript.
</p> </article>                  </section><section id="03_modules" class="exercise-section"> <h3>03 modules</h3>   <article> <h4>üìù Question :</h4> <p>
Cr√©ez une application avec trois fichiers : <code>calculJours.ts</code>, <code>moduleVacances.ts</code> et <code>moduleTravail.ts</code> qui utilisent des modules pour calculer le nombre de jours de vacances restants et le nombre de jours de travail restants pour un employ√©.
</p> <ul> <li>
Dans les deux modules <code>moduleVacances.ts</code> et <code>moduleTravail.ts</code>, cr√©ez la fonction <code>calculerJoursRestants</code> avec le m√™me nom dans les deux modules, qui prend en param√®tre le nombre de jours de vacances ou de travail d√©j√† pris et retourne le nombre de jours restants.
</li> <li>
Exportez la fonction avec <code>export</code> dans les deux modules.
</li> <li>
Dans le fichier <code>calculJours.ts</code>, importez les deux modules et utilisez la fonction <code>calculerJoursRestants</code> pour afficher le nombre de jours de vacances et de travail restants pour un employ√©. R√©solvez le conflit de nom entre les deux modules.
</li> <li>
Affichez les r√©sultats dans des balises <code>div</code> avec <code>createElement</code> et <code>appendChild</code>.
</li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>
Commencez par cr√©er un projet Astro comme expliqu√© dans les exercices pr√©c√©dents.
</p> <p>
Ensuite, remplacez le contenu du fichier <code>src/pages/index.astro</code> par :
</p> <pre><code class="language-html">
---
---

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;WebDev101 Telecom Paris&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src="../scripts/calculJours.ts"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
    </code></pre> <p>
Ensuite, dans le dossier <code>src</code>, cr√©ez un sous-dossier <code>scripts</code>, puis ajoutez-y les trois fichiers suivants avec le contenu correspondant :
</p> <p><strong>moduleVacances.ts</strong></p> <pre><code class="language-ts">
export function calculerJoursRestants(joursPris: number): number {
  return 30 - joursPris;
}
    </code></pre> <p><strong>moduleTravail.ts</strong></p> <pre><code class="language-ts">
export function calculerJoursRestants(joursPris: number): number {
  return 218 - joursPris;
}
    </code></pre> <p><strong>calculJours.ts</strong></p> <pre><code class="language-ts">
import * as Vacances from "./moduleVacances.ts";
import * as Travail from "./moduleTravail.ts";

const joursVacancesRestants = Vacances.calculerJoursRestants(10);
const joursTravailRestants = Travail.calculerJoursRestants(30);

const div = document.createElement("div");
div.id = "resultats";

const vacancesEl = document.createElement("p");
vacancesEl.textContent = "Jours de vacances restants : " + joursVacancesRestants;

const travailEl = document.createElement("p");
travailEl.textContent = "Jours de travail restants : " + joursTravailRestants;

div.appendChild(vacancesEl);
div.appendChild(travailEl);
document.body.appendChild(div);
</code></pre> <p>
Cette solution montre comment utiliser deux modules diff√©rents ayant une fonction portant le m√™me nom, et g√©rer le conflit gr√¢ce √† des alias d'importation (ici avec <code>* as</code>).
</p> </article>                 </section><section id="04_client_server" class="exercise-section"> <h3>04 client or server side</h3>    <article> <h4>üìù Question :</h4> <p>
Regardez bien tous les fichiers source fournis dans le projet Astro.
<code>index.astro</code> et <code>moduleWeatherServerSide.ts</code> sont dans le dossier <code>src/pages</code> et
<code>app.ts</code> ainsi que <code>moduleWeatherClientSide.ts</code> sont dans le dossier <code>src/scripts</code>.
</p> <p>
Ajoutez des <code>console.log("message")</code> juste avant les <code>return</code> (en changeant "message" par ce que vous voulez)
      dans les fonctions <code>getCurrentHumidity</code>, <code>getCurrentWind</code>, <code>getCurrentTemperature</code> et <code>getCurrentCloudCover</code>.
</p> <p>
O√π s'affichent les 4 messages ? Dans le terminal du serveur Astro ou dans la console du navigateur ? Pourquoi ?
</p> <h4>‚úÖ R√©ponse :</h4> <h5># Diff√©rence d'affichage des messages entre le serveur et le client</h5> <h6>## Observation</h6> <ul> <li>üñ•Ô∏è Les messages de <strong>Temperature</strong> et <strong>Cloud Cover</strong> se trouvent dans le <em>terminal du serveur Astro</em>.</li> <li>üåê Les messages de <strong>Humidity</strong> et <strong>Wind Speed</strong> se trouvent dans la <em>console du navigateur</em>.</li> </ul> <h6>## Explication</h6> <h6>### C√¥t√© serveur :</h6> <p>
Les fonctions <code>getCurrentTemperature</code> et <code>getCurrentCloudCover</code> sont ex√©cut√©es lors du rendu c√¥t√© serveur, c‚Äôest-√†-dire avant que la page ne soit envoy√©e au navigateur.
</p> <p>
Astro ex√©cute ces fonctions sur le serveur (dans Node.js ou un environnement similaire) pour g√©n√©rer le HTML avec les donn√©es d√©j√† int√©gr√©es.
      Ainsi, les <code>console.log</code> situ√©s dans ces fonctions s‚Äôaffichent dans le terminal du serveur, et non dans le navigateur.
</p> <h6>### C√¥t√© client :</h6> <p>
Les fonctions <code>getCurrentHumidity</code> et <code>getCurrentWind</code> sont appel√©es dans du code ex√©cut√© <strong>apr√®s le chargement de la page</strong>, directement dans le navigateur via un script c√¥t√© client.
</p> <p>
Par cons√©quent, leurs <code>console.log</code> apparaissent dans la console des outils de d√©veloppement du navigateur, et non sur le serveur.
</p> <p><strong>Conclusion :</strong> Cela illustre la diff√©rence entre le code ex√©cut√© <em>√† la construction de la page</em> (serveur) et le code ex√©cut√© <em>apr√®s le chargement de la page</em> (client).</p> </article>                </section><section id="05_html_css_punto" class="exercise-section"> <h3>05 html css punto</h3>     <article> <p>Ceci est mon mini-projet. Veuillez cliquer sur le lien <strong>Punto</strong> dans la barre de navigation pour voir le r√©sultat.</p> </article>               </section><section id="06_css_flexbox" class="exercise-section"> <h3>06 CSS flexbox</h3>      <article> <h4>üìù Question :</h4> <p>
Faites les 4 exercices suivants. Pour le rendu du TP, cr√©ez un fichier HTML et un fichier CSS pour chaque exercice, et mettez les 4 exercices dans un dossier <code>06_CSS_flexbox</code> dans votre d√©p√¥t git. N'oubliez pas de lier vos fichiers HTML et CSS.
</p> <ul> <li><a href="https://developer.mozilla.org/fr/docs/Learn/CSS/CSS_layout/Flexbox_skills#disposition_flexible_1" target="_blank">Disposition flexible 1</a></li> <li><a href="https://developer.mozilla.org/fr/docs/Learn/CSS/CSS_layout/Flexbox_skills#disposition_flexible_2" target="_blank">Disposition flexible 2</a></li> <li><a href="https://developer.mozilla.org/fr/docs/Learn/CSS/CSS_layout/Flexbox_skills#disposition_flexible_3" target="_blank">Disposition flexible 3</a></li> <li><a href="https://developer.mozilla.org/fr/docs/Learn/CSS/CSS_layout/Flexbox_skills#disposition_flexible_4" target="_blank">Disposition flexible 4</a></li> </ul> <h4>‚úÖ R√©ponse :</h4> <h5>üéØ Exercice 1 : Navigation horizontale</h5> <p>
üëâ Le code HTML peut √™tre consult√© ici :
<a href="https://github.com/mdn/css-examples/blob/main/learn/tasks/flexbox/flexbox1-download.html" target="_blank">flexbox1-download.html</a> </p> <p><strong>task1.css</strong></p> <pre><code class="language-css">{`nav ul {
  display: flex;
  justify-content: space-between;
  width: 100%;
  padding: 0;
}`}</code></pre> <h5>üéØ Exercice 2 : R√©partition horizontale de 3 blocs</h5> <p>
üëâ Le code HTML peut √™tre consult√© ici :
<a href="https://github.com/mdn/css-examples/blob/main/learn/tasks/flexbox/flexbox2-download.html" target="_blank">flexbox2-download.html</a> </p> <p><strong>task2.css</strong></p> <pre><code class="language-css">{`ul {
  display: flex;
  flex-direction: row;
  height: 100vh;
  padding: 0;
  margin: 0;
}

li {
  flex: 1;
  display: flex;
  justify-content: flex-start;
  margin: 0.5em 0;
}`}</code></pre> <h5>üéØ Exercice 3 : Centrage vertical et horizontal</h5> <p>
üëâ Le code HTML peut √™tre consult√© ici :
<a href="https://github.com/mdn/css-examples/blob/main/learn/tasks/flexbox/flexbox3-download.html" target="_blank">flexbox3-download.html</a> </p> <p><strong>task3.css</strong></p> <pre><code class="language-css">{`.parent {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: auto;
}

.child {
  width: 100px;
  height: 100px;
  background-color: lightblue;
}`}</code></pre> <h5>üéØ Exercice 4 : Grille responsive en 3 lignes</h5> <p>
üëâ Le code HTML peut √™tre consult√© ici :
<a href="https://github.com/mdn/css-examples/blob/main/learn/tasks/flexbox/flexbox4-download.html" target="_blank">flexbox4-download.html</a> </p> <p><strong>task4.css</strong></p> <pre><code class="language-css">{`ul {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-content: space-between;
  height: 100vh;
  list-style: none;
  padding: 0;
  margin: 0;
}

li {
  background-color: #4d7298;
  border: 2px solid #77a6b6;
  border-radius: 0.5em;
  color: #fff;
  padding: 0.5em;
  margin: 0.5em;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

li:nth-child(-n+4) {
  flex: 1 1 calc(25% - 1em);
  height: calc(33.33% - 1em);
}

li:nth-child(n+5):nth-child(-n+7),
li:nth-child(n+8) {
  flex: 1 1 calc(33.33% - 1em);
  height: calc(33.33% - 1em);
}`}</code></pre> <p>üìÅ Tous les fichiers CSS ci-dessus sont plac√©s dans le dossier <code>06_CSS_flexbox</code> conform√©ment √† l'instruction du TP.</p> </article>              </section><section id="07_fat_arrow" class="exercise-section"> <h3>07 fat arrow</h3>       <article> <h4>üìù Exercice 1 :</h4> <p>
Faites un projet Astro et faites en sorte que le fichier <code>app.ts</code> soit ex√©cut√© dans le navigateur (c√¥t√© client). Cela permet d'acc√©der √† l'objet <code>document</code> qui repr√©sente la page web affich√©e dans le navigateur.
</p> <p>
Ajoutez un <code>addEventListener</code> sur le <code>document</code> pour afficher les coordonn√©es du clic de la souris.
</p> <h4>‚úÖ R√©ponse :</h4> <p>
Veuillez d'abord cr√©er un projet Astro comme dans les exercices pr√©c√©dents, puis remplacez le fichier <code>src/pages/index.astro</code> avec le code minimal qui appelle un fichier <code>app.ts</code> situ√© dans le dossier <code>src/scripts</code>.
</p> <p>Le contenu du fichier <code>app.ts</code> est le suivant :</p> <pre><code class="language-ts">{`document.addEventListener("click", (event: MouseEvent) => {
  console.log(\`x: \${event.clientX}, y: \${event.clientY}\`);
});`}</code></pre> <hr> <h4>üìù Exercice 2 :</h4> <p>
Faites une application de calculatrice :
</p> <ul> <li>Cr√©ez une fonction fl√©ch√©e <code>additionner</code> qui prend deux nombres et retourne leur somme.</li> <li>Cr√©ez une fonction fl√©ch√©e <code>soustraire</code> qui retourne la diff√©rence.</li> <li>Cr√©ez une fonction fl√©ch√©e <code>multiplier</code> qui retourne le produit.</li> <li>Cr√©ez une fonction fl√©ch√©e <code>diviser</code> qui retourne le quotient.</li> <li>
Cr√©ez une fonction fl√©ch√©e <code>calculatrice</code> qui prend deux nombres et une cha√Æne repr√©sentant l‚Äôop√©ration, puis affiche le r√©sultat de l‚Äôop√©ration.
</li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>Voici le contenu du fichier <code>app.ts</code> correspondant √† cette calculatrice :</p> <pre><code class="language-ts">{`const additionner = (a: number, b: number): number => a + b;
const soustraire = (a: number, b: number): number => a - b;
const multiplier = (a: number, b: number): number => a * b;
const diviser = (a: number, b: number): number => a / b;

const calculatrice = (a: number, b: number, operation: string): void => {
  let resultat: number;

  switch (operation) {
    case "additionner":
      resultat = additionner(a, b);
      break;
    case "soustraire":
      resultat = soustraire(a, b);
      break;
    case "multiplier":
      resultat = multiplier(a, b);
      break;
    case "diviser":
      resultat = diviser(a, b);
      break;
    default:
      console.log("Op√©ration non reconnue.");
      return;
  }

  console.log(\`\${operation}(\${a}, \${b}) = \${resultat}\`);
};

// Exemple d'appel :
calculatrice(10, 5, "additionner");
calculatrice(10, 5, "soustraire");
calculatrice(10, 5, "multiplier");
calculatrice(10, 5, "diviser");`}</code></pre> <hr> <h4>üìù Exercice 3 :</h4> <p>
Faites une application qui affiche les coordonn√©es de la souris toutes les secondes.
      Vous pouvez vous aider de la documentation de l'objet <code>MouseEvent</code> :
<a href="https://developer.mozilla.org/fr/docs/Web/API/MouseEvent" target="_blank">MDN MouseEvent</a> </p> <h4>‚úÖ R√©ponse :</h4> <p>Voici le contenu du fichier <code>app.ts</code> :</p> <pre><code class="language-ts">{`let mouseX: number = 0;
let mouseY: number = 0;

document.addEventListener("mousemove", (event: MouseEvent) => {
  mouseX = event.clientX;
  mouseY = event.clientY;
});

setInterval(() => {
  console.log(\`x: \${mouseX}, y: \${mouseY}\`);
}, 1000);`}</code></pre> </article>             </section><section id="08_map_reduce" class="exercise-section"> <h3>08 map reduce filter</h3>        <article> <h4>üìù Question :</h4> <p>
Cr√©ez un tableau de cha√Ænes de caract√®res qui repr√©sentent des noms de fruits (le tableau initial) :
<code>"pomme", "kiwi", "banane", "cerise", "orange", "poire", "fraise", "prune", "ananas", "p√™che"</code> </p> <ul> <li>Utilisez <code>map</code> et une fonction fl√©ch√©e pour cr√©er un nouveau tableau o√π chaque fruit est √©crit en majuscules.</li> <li>Utilisez <code>filter</code> et une fonction fl√©ch√©e pour cr√©er un nouveau tableau qui ne contient que les fruits qui commencent par la lettre <code>'p'</code>.</li> <li>Utilisez <code>reduce</code> et une fonction fl√©ch√©e pour obtenir une seule cha√Æne qui contient tous les noms de fruits s√©par√©s par des virgules.</li> <li>Utilisez <code>find</code> et une fonction fl√©ch√©e pour trouver le premier fruit qui a plus de 5 lettres.</li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>Voici un exemple de code TypeScript qui r√©pond √† toutes les consignes ci-dessus :</p> <pre><code class="language-ts">{`let tab: string[] = ["pomme", "kiwi", "banane", "cerise", "orange", "poire", "fraise", "prune", "ananas", "p√™che"];
console.log("tab: " + tab);

// utilisation de map
function toUpperCase(str: string): string {
  return str.toUpperCase();
}
let tab_majuscule: string[] = tab.map(toUpperCase);
console.log("tab.map(toUpperCase): " + tab_majuscule);

// utilisation de filter
function filter_p(str: string): boolean {
  return str.startsWith("p");
}
let tab_filtrage: string[] = tab.filter(filter_p);
console.log("tab.filter(filter_p): " + tab_filtrage);

// utilisation de reduce
let chaine = (a: string, b: string) => a + "," + b;
let tab_reduce = tab.reduce(chaine);
console.log("tab.reduce(chaine): " + tab_reduce);

// utilisation de find
function plusGrandQue5(str: string): boolean {
  return str.length > 5;
}
let tab_plusGrandQue5_valeur = tab.find(plusGrandQue5);
let tab_plusGrandQue5_index = tab.findIndex(plusGrandQue5);
console.log(
  \`\${tab_plusGrandQue5_valeur} est le premier √©l√©ment sup√©rieur √† 5 et il est situ√© √† la position \${tab_plusGrandQue5_index}\`
);`}</code></pre> <p>
Ce code utilise les quatre m√©thodes fonctionnelles de manipulation de tableaux en JavaScript (<code>map</code>, <code>filter</code>, <code>reduce</code>, <code>find</code>) avec des fonctions fl√©ch√©es ou des fonctions classiques selon les besoins p√©dagogiques.
</p> </article>            </section><section id="09_objects" class="exercise-section"> <h3>09 objects</h3>         <article> <h4>üìù Question :</h4> <p>
Cr√©ez une interface <code>IVehicle</code> qui d√©finit une m√©thode <code>drive</code> qui renvoie <code>void</code> et une m√©thode <code>honk</code> qui renvoie <code>void</code>.
</p> <p>
Cr√©ez une classe abstraite <code>Vehicle</code> qui impl√©mente <code>IVehicle</code> et qui a une propri√©t√© <code>speed</code>, une m√©thode abstraite <code>honk</code> (qui renvoie <code>void</code>), et une m√©thode <code>drive</code> qui affiche <code>"Driving at " + this.speed + " km/h"</code> dans la console.
</p> <p>
Cr√©ez une classe <code>Car</code> qui h√©rite de <code>Vehicle</code> et impl√©mente <code>honk</code> avec l'affichage <code>"Beep beep!"</code>.
</p> <p>
Cr√©ez une classe <code>Bicycle</code> qui h√©rite de <code>Vehicle</code> et impl√©mente <code>honk</code> avec l'affichage <code>"Ring Ring"</code>.
</p> <p>
Cr√©ez deux instances de <code>Car</code> et trois de <code>Bicycle</code>, puis ajoutez-les √† un tableau <code>vehicles</code> de type <code>IVehicle[]</code>.
</p> <p>
Parcourez le tableau <code>vehicles</code> avec une boucle <code>for...of</code> et appelez les m√©thodes <code>drive</code> et <code>honk</code> √† chaque it√©ration.
</p> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`interface IVehicle {
  drive(): void;
  honk(): void;
}

abstract class Vehicle implements IVehicle {
  speed: number;

  constructor(speed: number) {
    this.speed = speed;
  }

  abstract honk(): void;

  drive(): void {
    console.log(\`Driving at \${this.speed} km/h\`);
  }
}

class Car extends Vehicle {
  honk(): void {
    console.log("Beep beep!");
  }
}

class Bicycle extends Vehicle {
  honk(): void {
    console.log("Ring Ring");
  }
}

// Cr√©er des instances de Car et Bicycle
const car1 = new Car(100);
const car2 = new Car(120);
const bicycle1 = new Bicycle(20);
const bicycle2 = new Bicycle(25);
const bicycle3 = new Bicycle(30);

// Ajouter les instances dans un tableau
const vehicles: IVehicle[] = [car1, car2, bicycle1, bicycle2, bicycle3];

for (const vehicle of vehicles) {
  vehicle.drive();
  vehicle.honk();
}`}</code></pre> <p>
Cette activit√© permet de comprendre l'utilisation des interfaces, classes abstraites, h√©ritage, et polymorphisme en TypeScript avec une syntaxe orient√©e objet.
</p> </article>           </section><section id="10_json" class="exercise-section"> <h3>10 json</h3>          <article> <h4>üìù Question :</h4> <ul> <li>Cr√©ez une interface <code>IUser</code> qui repr√©sente un utilisateur avec les propri√©t√©s <code>id</code>, <code>name</code>, <code>age</code>, et un tableau <code>scores</code> (nombres entiers), ainsi que deux m√©thodes : <code>getMaxScore</code> et <code>getAverageScore</code>.</li> <li>Cr√©ez une classe <code>User</code> qui impl√©mente <code>IUser</code>.</li> <li>Cr√©ez trois instances de <code>User</code>.</li> <li>Cr√©ez un tableau de type <code>IUser[]</code> contenant ces trois instances.</li> <li>Cr√©ez une fonction <code>serializeUsers</code> qui s√©rialise un tableau de <code>IUser</code> en JSON et affichez le r√©sultat.</li> <li>Cr√©ez une fonction <code>deserializeUsers</code> qui prend une cha√Æne JSON et retourne un tableau de <code>IUser</code>. Appelez cette fonction et affichez le r√©sultat.</li> <li>Expliquez pourquoi on ne peut pas appeler <code>getMaxScore</code> et <code>getAverageScore</code> sur les objets d√©s√©rialis√©s sans conversion.</li> <li>Trouvez une solution pour restaurer le comportement des m√©thodes, en cr√©ant de nouvelles instances de <code>User</code> avec les donn√©es d√©s√©rialis√©es.</li> <li>Affichez le nom, le score maximum et la moyenne du deuxi√®me utilisateur du tableau d√©s√©rialis√©.</li> </ul> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`interface IUser {
  id: string;
  name: string;
  age: number;
  scores: number[];
  getMaxScore(): number;
  getAverageScore(): number;
}

class User implements IUser {
  id: string;
  name: string;
  age: number;
  scores: number[];

  constructor(id: string, name: string, age: number, scores: number[]) {
    this.id = id;
    this.name = name;
    this.age = age;
    this.scores = scores;
  }

  getMaxScore(): number {
    return Math.max(...this.scores);
  }

  getAverageScore(): number {
    const total = this.scores.reduce((acc, score) => acc + score, 0);
    return total / this.scores.length;
  }
}

// Cr√©ation des instances
const User1 = new User("123", "John", 25, [20, 30, 40]);
const User2 = new User("456", "Eya", 23, [2.4, 34]);
const User3 = new User("789", "Emma", 32, [23.1, 9, 5]);

const users: IUser[] = [User1, User2, User3];

// S√©rialisation
function serializeUsers(users: IUser[]): string {
  return JSON.stringify(users);
}

// D√©s√©rialisation avec restauration de m√©thodes
function deserializeUsers(json: string): IUser[] {
  const parsed = JSON.parse(json);
  return parsed.map((user: any) => new User(user.id, user.name, user.age, user.scores));
}

// S√©rialiser
const serializedUsers = serializeUsers(users);
console.log("Serialized Users:", serializedUsers);

// D√©s√©rialiser
const deserializedUsers = deserializeUsers(serializedUsers);
console.log("Deserialized Users:", deserializedUsers);

// Utiliser les m√©thodes restaur√©es
deserializedUsers.forEach(user => {
  console.log(\`User: \${user.name}, Max Score: \${user.getMaxScore()}, Average Score: \${user.getAverageScore()}\`);
});

// Affichage du 2e utilisateur
const secondUser = deserializedUsers[1];
console.log(\`Second User: \${secondUser.name}, Max Score: \${secondUser.getMaxScore()}, Average Score: \${secondUser.getAverageScore()}\`);`}</code></pre> <p>
üîé <strong>Remarque :</strong> apr√®s une d√©s√©rialisation avec <code>JSON.parse</code>, les objets obtenus ne sont plus des instances de la classe <code>User</code>, mais des objets simples sans m√©thodes. Il faut donc les retransformer en vraies instances avec <code>new User(...)</code> pour pouvoir appeler <code>getMaxScore</code> et <code>getAverageScore</code>.
</p> </article>          </section><section id="11_generics" class="exercise-section"> <h3>11 generics</h3>           <article> <h4>üìù Question :</h4> <p>
Cr√©ez une classe <code>Queue</code> qui utilise les <strong>g√©n√©riques</strong>. Cette classe doit avoir les m√©thodes suivantes :
</p> <ul> <li><code>enqueue(element: T)</code> : ajoute un √©l√©ment √† la queue.</li> <li><code>dequeue()</code> : supprime et renvoie l'√©l√©ment en t√™te de la queue. Si la queue est vide, cette m√©thode doit renvoyer <code>undefined</code>.</li> <li><code>size()</code> : renvoie le nombre d'√©l√©ments dans la queue.</li> </ul> <p>
Cr√©ez une instance de <code>Queue</code> qui stocke des <strong>nombres</strong> et une autre qui stocke des <strong>cha√Ænes de caract√®res</strong>. Testez les m√©thodes <code>enqueue</code>, <code>dequeue</code> et <code>size</code> sur ces instances.
</p> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`class Queue<T> {
  private queue: T[] = [];

  enqueue(element: T): void {
    this.queue.push(element);
    console.log(\`Have push \${element} into the queue\`);
  }

  dequeue(): T | undefined {
    const dequeuedElement = this.queue.shift();
    console.log(\`Have pull \${dequeuedElement} out of the queue\`);
    return dequeuedElement;
  }

  size(): number {
    const size = this.queue.length;
    console.log(\`The size of the queue: \${size}\`);
    return size;
  }
}

// ====== Test avec des nombres ======
let numberQueue = new Queue<number>();
numberQueue.enqueue(1);
numberQueue.enqueue(2);
numberQueue.size();       // 2
numberQueue.dequeue();    // 1
numberQueue.dequeue();    // 2
numberQueue.size();       // 0
numberQueue.dequeue();    // undefined

// ====== Test avec des cha√Ænes de caract√®res ======
let stringQueue = new Queue<string>();
stringQueue.enqueue("Hello");
stringQueue.enqueue("World");
stringQueue.size();       // 2
stringQueue.dequeue();    // "Hello"
stringQueue.dequeue();    // "World"
stringQueue.size();       // 0
stringQueue.dequeue();    // undefined`}</code></pre> <p>
Ce code montre comment utiliser des <strong>types g√©n√©riques</strong> en TypeScript pour cr√©er une structure de donn√©es r√©utilisable et typ√©e. La m√™me classe <code>Queue</code> peut √™tre utilis√©e pour n'importe quel type : nombres, cha√Ænes, objets, etc.
</p> </article>         </section><section id="12_exceptions" class="exercise-section"> <h3>12 exceptions</h3>            <article> <h4>üìù Question :</h4> <ul> <li>Cr√©er la classe <code>Rectangle</code> avec les propri√©t√©s <code>longueur</code> et <code>largeur</code>, et un constructeur qui initialise ces propri√©t√©s.</li> <li>Ajouter une m√©thode <code>calculerSurface</code> qui calcule la surface. Elle doit utiliser <code>throw</code> pour g√©rer les cas o√π les dimensions sont n√©gatives, nulles ou non num√©riques.</li> <li>Ajouter une m√©thode <code>essayerCalculerSurface</code> qui utilise un bloc <code>try-catch-finally</code> pour appeler <code>calculerSurface</code> et g√©rer les erreurs potentielles.</li> <li>Cr√©er plusieurs instances de <code>Rectangle</code> pour tester le bon fonctionnement de la gestion des exceptions.</li> </ul> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`class Rectangle {
  largeur: number;
  longueur: number;

  constructor(largeur: number, longueur: number) {
    this.largeur = largeur;
    this.longueur = longueur;
  }

  calculerSurface(): number {
    if (this.largeur <= 0 || this.longueur <= 0) {
      throw new Error("La largeur et la longueur doivent √™tre sup√©rieures √† 0");
    }
    if (isNaN(this.largeur) || isNaN(this.longueur)) {
      throw new Error("La largeur et la longueur doivent √™tre des nombres");
    }
    return this.largeur * this.longueur;
  }

  essayerCalculerSurface() {
    try {
      console.log(\`Surface: \${this.calculerSurface()}\`);
    } catch (e: any) {
      console.error(e.message);
    } finally {
      console.log("Fin de la tentative de calcul de la surface.");
    }
  }
}

// Cas de test
const rectangle1 = new Rectangle(5, 10);
rectangle1.essayerCalculerSurface(); // ‚úÖ Surface: 50

const rectangle2 = new Rectangle(-5, 10);
rectangle2.essayerCalculerSurface(); // ‚ùå Erreur : dimensions n√©gatives

const rectangle3 = new Rectangle(5, -10);
rectangle3.essayerCalculerSurface(); // ‚ùå Erreur : dimensions n√©gatives

const rectangle4 = new Rectangle(5, NaN);
rectangle4.essayerCalculerSurface(); // ‚ùå Erreur : dimensions non valides`}</code></pre> <p>
Ce code montre comment utiliser les <strong>exceptions</strong> pour g√©rer les erreurs li√©es aux donn√©es invalides dans une classe TypeScript, et comment utiliser les blocs <code>try-catch-finally</code> pour s√©curiser l'ex√©cution.
</p> </article>        </section><section id="13_async_await" class="exercise-section"> <h3>13 async await</h3>             <article> <h4>üìù Exercice 1 :</h4> <p>
Cr√©ez une fonction <code>calculateSumAsync</code> qui prend deux nombres comme arguments et retourne une promesse qui se r√©sout √† leur somme apr√®s 3 secondes.
</p> <p>
Utilisez <code>async</code> et <code>await</code> dans une fonction <code>printSum</code> pour appeler <code>calculateSumAsync</code>. Cette fonction doit afficher "Calcul en cours..." puis le r√©sultat une fois disponible.
</p> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`function calculateSumAsync(a: number, b: number): Promise<number> {
  return new Promise<number>((resolve) => {
    setTimeout(() => {
      resolve(a + b);
    }, 3000);
  });
}

async function printSum(a: number, b: number): Promise<void> {
  console.log("Calcul en cours...");
  const sum = await calculateSumAsync(a, b);
  console.log(\`La somme est : \${sum}\`);
}

// Test
printSum(5, 10);`}</code></pre> <hr> <h4>üìù Exercice 2 :</h4> <p>
Cr√©ez une fonction <code>verifyUser</code> qui prend un nom d'utilisateur et un mot de passe. Elle retourne une promesse r√©solue si les identifiants sont corrects, ou rejet√©e sinon.
</p> <p>
Utilisez <code>then</code> et <code>catch</code> pour g√©rer la promesse : afficher un message de bienvenue ou une erreur.
</p> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`function verifyUser(User: string, password: string): Promise<string> {
  return new Promise<string>((resolve, reject) => {
    const success = (User === password);
    setTimeout(() => {
      if (success) {
        resolve("Bienvenue!");
      } else {
        reject(new Error("Erreur: Utilisateur ou mot de passe incorrect"));
      }
    }, 2000);
  });
}

// Utilisation
verifyUser("mobsf", "mobsf")
  .then((retour) => console.log(retour))
  .catch((error) => console.error(error.message));

verifyUser("mobsf", "mobsf1")
  .then((retour) => console.log(retour))
  .catch((error) => console.error(error.message));`}</code></pre> <hr> <h4>üìù Exercice 3 :</h4> <p>
Reprenez les exercices pr√©c√©dents mais cette fois-ci en utilisant des classes :
</p> <ul> <li><code>Calculator</code> pour encapsuler <code>calculateSumAsync</code></li> <li><code>User</code> pour encapsuler <code>verifyUser</code></li> </ul> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`class Calculator {
  calculateSumAsync(a: number, b: number): Promise<number> {
    return new Promise<number>((resolve) => {
      setTimeout(() => {
        resolve(a + b);
      }, 3000);
    });
  }
}

async function printsum(a: number, b: number): Promise<void> {
  console.log("Calcul en cours...");
  const calculator = new Calculator();
  const sum = await calculator.calculateSumAsync(a, b);
  console.log(\`La somme est : \${sum}\`);
}

// Test
printsum(5, 10);

class User_tp13 {
  private username: string;
  private password: string;

  constructor(username: string, password: string) {
    this.username = username;
    this.password = password;
  }

  verifyUser(inputUsername: string, inputPassword: string): Promise<string> {
    return new Promise<string>((resolve, reject) => {
      const success = (this.username === inputUsername && this.password === inputPassword);
      setTimeout(() => {
        if (success) {
          resolve(\`Bienvenue, \${this.username}!\`);
        } else {
          reject(new Error("Erreur: Utilisateur ou mot de passe incorrect"));
        }
      }, 2000);
    });
  }
}

// Test de la classe User
const user = new User_tp13("mobsf", "password123");

user.verifyUser("mobsf", "password123")
  .then((message) => console.log(message))
  .catch((error) => console.error(error.message));

user.verifyUser("mobsf", "wrongpassword")
  .then((message) => console.log(message))
  .catch((error) => console.error(error.message));`}</code></pre> <p>
Ces exercices d√©montrent l'utilisation des <strong>promesses</strong>, de <strong>async/await</strong> et de la <strong>programmation orient√©e objet</strong> avec TypeScript.
</p> </article>       </section><section id="14_fetch" class="exercise-section"> <h3>14 fetch</h3>              <article> <h4>üìù Exercice 1 :</h4> <p>
Afficher les propri√©t√©s de chaque tremblement de terre dans le navigateur. Faites en sorte que le script s'ex√©cute c√¥t√© client et soit servi avec un serveur Astro.
</p> <h4>‚úÖ R√©ponse :</h4> <p>
Comme pour les exercices pr√©c√©dents, cr√©ez un projet Astro et modifiez le fichier <code>src/pages/index.astro</code> pour inclure un fichier TypeScript c√¥t√© client depuis <code>src/scripts</code>.
</p> <p>Le fichier TypeScript contient le code suivant :</p> <pre><code class="language-ts">{`interface Earthquake {
  properties: {
    time: number;
    place: string;
    mag: number;
  };
}

class EarthquakeService {
  private async getEarthquakesFromUSGS(): Promise<Earthquake[]> {
    const response = await fetch(
      "https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=yesterday&endtime=today&minmagnitude=4"
    );
    const earthquakejson = await response.json();
    return earthquakejson.features;
  }

  async displayEarthquakes() {
    try {
      const earthquakes = await this.getEarthquakesFromUSGS();
      const ul = document.createElement("ul");

      earthquakes.forEach((earthquake) => {
        const date = new Date(earthquake.properties.time);
        const options = {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          timeZone: "Europe/Paris",
        };
        const dateString = date.toLocaleDateString("fr-FR", options);
        const finalString = dateString + " - " + earthquake.properties.mag + " - " + earthquake.properties.place;
        console.log(finalString);

        const li = document.createElement("li");
        li.textContent = finalString;
        ul.appendChild(li);
      });

      document.body.appendChild(ul);
    } catch (error) {
      console.error("Erreur lors de la r√©cup√©ration des tremblements de terre :", error);
    }
  }
}

const earthquakeService = new EarthquakeService();
earthquakeService.displayEarthquakes();`}</code></pre> <hr> <h4>üìù Exercice 2 :</h4> <p>
Cr√©ez une interface <code>Address</code> pour repr√©senter les r√©sultats de recherche d'adresse, en extrayant les champs depuis <code>properties</code> dans les objets de type Feature.
</p> <p>
Cr√©ez une classe <code>AddressService</code> avec une m√©thode <code>searchAddress(query, limit)</code> qui effectue une requ√™te <code>GET</code> √† l'API <a href="https://api-adresse.data.gouv.fr/search/" target="_blank">api-adresse.data.gouv.fr</a> et retourne les r√©sultats.
</p> <p>
Affichez ensuite les r√©sultats dans la console et sur la page web, en formatant les propri√©t√©s souhait√©es. G√©rez aussi les erreurs de mani√®re appropri√©e.
</p> <h4>‚úÖ R√©ponse :</h4> <pre><code class="language-ts">{`interface Address {
  properties: {
    city: string;
    postcode: number;
    street: string;
    houseNumber: number;
    context: string;
    lat: number;
    lon: number;
  };
}

class AddressService {
  async searchAddress(query: string, limit: number): Promise<any> {
    try {
      const encodedQuery = encodeURIComponent(query);
      const url = \`https://api-adresse.data.gouv.fr/search/?q=\${encodedQuery}&limit=\${limit}\`;
      const response = await fetch(url);

      if (!response.ok) {
        throw new Error("Erreur lors de la requ√™te : " + response.statusText);
      }

      const data = await response.json();
      return data.features;
    } catch (error) {
      console.error("Une erreur est survenue lors de la recherche d'adresse :", error);
      throw error;
    }
  }

  displayResults(results: any[]): void {
    console.log("R√©sultats de la recherche :", results);

    const resultContainer = document.getElementById("results") || document.createElement("ul");
    resultContainer.id = "results";
    resultContainer.innerHTML = "";

    results.forEach((result) => {
      const {
        city = "N/A",
        postcode = "N/A",
        street = "N/A",
        housenumber = "N/A",
        context = "N/A"
      } = result.properties;

      const [lon = "N/A", lat = "N/A"] = result.geometry.coordinates;

      const listItem = document.createElement("li");
      listItem.textContent = \`City: \${city}, Postcode: \${postcode}, Street: \${street}, House Number: \${housenumber}, Context: \${context}, Latitude: \${lat}, Longitude: \${lon}\`;
      resultContainer.appendChild(listItem);
    });

    if (!document.body.contains(resultContainer)) {
      document.body.appendChild(resultContainer);
    }
  }
}

const addressService = new AddressService();
addressService.searchAddress("8 bd du port", 5)
  .then((results) => {
    addressService.displayResults(results);
  })
  .catch((error) => {
    console.error("Erreur :", error.message);
  });`}</code></pre> <p>
Ces deux exercices vous permettent de pratiquer l'utilisation de <strong>fetch</strong> pour des appels API r√©els, le traitement JSON, et l'affichage dynamique des donn√©es sur une page web c√¥t√© client avec TypeScript.
</p> </article>      </section><section id="15_cors" class="exercise-section"> <h3>15 cors</h3>               <article> <h4>üìù Question :</h4> <p>
Faites une application qui s'ex√©cute c√¥t√© <strong>serveur</strong> (pour ne pas √™tre bloqu√© par CORS) et qui affiche une liste des titres de la playlist
<a href="https://api.deezer.com/playlist/11846226041" target="_blank">Top 100 France 2023</a>.
</p> <p>
L'affichage doit √™tre une liste <code>&lt;ul&gt;</code> dont chaque √©l√©ment <code>&lt;li&gt;</code> contient :
</p> <ul> <li>Un index (√† partir de <code>1</code>)</li> <li>Le <strong>titre de la chanson</strong></li> <li>Le <strong>nom de l'artiste</strong></li> <li>Le <strong>titre de l'album</strong></li> <li>La <strong>miniature</strong> de l'album via <code>cover_small</code></li> <li>Un lecteur <code>&lt;audio&gt;</code> avec <code>controls</code> et <code>preload="none"</code></li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>
Commencez par cr√©er un projet Astro, puis modifiez le fichier <code>src/pages/index.astro</code> pour tester l‚ÄôAPI Deezer :
</p> <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Test Deezer API&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Test Deezer API&lt;/h1&gt;
  &lt;script&gt;
    fetch(&quot;https://api.deezer.com/playlist/11846226041&quot;)
      .then(response =&gt; response.json())
      .then(data =&gt; console.log(data))
      .catch(error =&gt; console.error(&quot;CORS Error:&quot;, error));
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> <p>Ensuite, cr√©ez le fichier <code>src/scripts/app.ts</code> c√¥t√© serveur :</p> <pre><code>import express from &quot;express&quot;;

const app = express();
const PORT = 3000;

interface DeezerPlaylist {
  tracks: {
    data: Datum[];
  };
}

interface Datum {
  title: string;
  artist: {
    name: string;
  };
  album: {
    title: string;
    cover_small: string;
  };
  preview: string;
}

app.get(&quot;/&quot;, async (req, res) =&gt; {
  try {
    const response = await fetch(&quot;https://api.deezer.com/playlist/11846226041&quot;);
    const data: DeezerPlaylist = await response.json();

    let html = `
      &lt;!DOCTYPE html&gt;
      &lt;html lang=&quot;fr&quot;&gt;
      &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot; /&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;title&gt;Top 100 France 2023&lt;/title&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;h1&gt;Top 100 France 2023&lt;/h1&gt;
        &lt;ul&gt;
    `;

    data.tracks.data.forEach((track, index) =&gt; {
      html += `
        &lt;li&gt;
          &lt;h3&gt;${index + 1}. ${track.title}&lt;/h3&gt;
          &lt;p&gt;${track.artist.name}&lt;/p&gt;
          &lt;p&gt;${track.album.title}&lt;/p&gt;
          &lt;img src=&quot;${track.album.cover_small}&quot; alt=&quot;cover&quot;&gt;
          &lt;audio controls preload=&quot;none&quot;&gt;
            &lt;source src=&quot;${track.preview}&quot; type=&quot;audio/mpeg&quot;&gt;
            Votre navigateur ne supporte pas l&#39;audio.
          &lt;/audio&gt;
        &lt;/li&gt;
      `;
    });

    html += `
        &lt;/ul&gt;
      &lt;/body&gt;
      &lt;/html&gt;
    `;

    res.send(html);
  } catch (error) {
    console.error(&quot;Erreur lors de la r√©cup√©ration des donn√©es :&quot;, error);
    res.status(500).send(&quot;Erreur serveur.&quot;);
  }
});

app.listen(PORT, () =&gt; {
  console.log(`Serveur d√©marr√© sur http://localhost:${PORT}`);
});</code></pre> <p>
‚úÖ Ce script Express contourne les erreurs CORS en appelant l‚ÄôAPI c√¥t√© serveur. Il g√©n√®re une page HTML avec tous les morceaux de la playlist.
</p> </article>     </section><section id="16_http_crud" class="exercise-section"> <h3>16 http CRUD</h3>                <article> <h4>üìù Question :</h4> <p>
Modifiez le fichier <code>app.ts</code> pour bien g√©rer les <strong>modifications des relations</strong> entre les restaurants et les cat√©gories :
</p> <ul> <li>‚úîÔ∏è √Ä chaque suppression/modification d'une <strong>cat√©gorie</strong>, mettez √† jour les <code>categoryIds</code> de tous les restaurants qui la contiennent.</li> <li>‚úîÔ∏è √Ä chaque suppression/modification d'un <strong>restaurant</strong>, mettez √† jour les <code>restaurantIds</code> de toutes les cat√©gories qui le contiennent.</li> <li>‚úîÔ∏è Dans les deux cas, modifiez aussi les relations dans <code>restaurantCategories</code>.</li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>Voici un extrait de code TypeScript repr√©sentatif de la solution compl√®te :</p> <pre><code class="language-ts">{`interface AlloResto {
  restaurants: Restaurant[];
  categories: Category[];
  restaurantCategories: RestaurantCategory[];
}

interface Category {
  id?: string;
  name?: string;
  restaurantIds?: string[];
}

interface RestaurantCategory {
  restaurantId?: string;
  categoryId?: string;
}

interface Restaurant {
  id?: string;
  name?: string;
  description?: string;
  categoryIds?: string[];
}

// D√©finition de clients g√©n√©riques HTTP (CRUD)
abstract class HttpClient<T> {
  protected url: string;
  protected options: RequestInit;

  constructor(url: string) {
    this.url = url;
    this.options = {
      headers: {
        "Content-Type": "application/json",
      },
    };
  }

  public async execute(): Promise<T | void> {
    try {
      const response = await fetch(this.url, this.options);
      if (response.ok) {
        const data: T = await response.json();
        return data;
      }
    } catch (error) {
      console.error("Fetch error: ", error);
    }
  }
}

class CreateClient<T> extends HttpClient<T> {
  constructor(url: string, data: T) {
    super(url);
    this.options.method = "POST";
    this.options.body = JSON.stringify(data);
  }
}

class ReadClient<T> extends HttpClient<T> {
  constructor(url: string) {
    super(url);
    this.options.method = "GET";
  }
}

class UpdateClient<T> extends HttpClient<T> {
  constructor(url: string, data: T) {
    super(url);
    this.options.method = "PATCH";
    this.options.body = JSON.stringify(data);
  }
}

class DeleteClient<T> extends HttpClient<T> {
  constructor(url: string) {
    super(url);
    this.options.method = "DELETE";
  }
}

// Exemple : suppression d'une cat√©gorie
const deleteCategoryClient = new DeleteClient<Category>("http://localhost:3000/categories/71b2");
deleteCategoryClient.execute().then((category) => {
  if (category) {
    console.log("DELETE Category :", category);

    const readRestaurants = new ReadClient<Restaurant[]>("http://localhost:3000/restaurants");
    readRestaurants.execute().then((restaurants) => {
      if (restaurants) {
        restaurants.forEach((r) => {
          if (r.categoryIds?.includes(category.id!)) {
            const updated = r.categoryIds.filter((id) => id !== category.id);
            new UpdateClient<Restaurant>(\`http://localhost:3000/restaurants/\${r.id}\`, {
              categoryIds: updated,
            }).execute();
          }
        });
      }
    });

    const readRelations = new ReadClient<RestaurantCategory[]>("http://localhost:3000/restaurantCategories");
    readRelations.execute().then((relations) => {
      if (relations) {
        const filtered = relations.filter((rel) => rel.categoryId !== category.id);
        new UpdateClient<RestaurantCategory[]>("http://localhost:3000/restaurantCategories", filtered).execute();
      }
    });
  }
});

// Exemple : suppression d'un restaurant
const deleteRestaurantClient = new DeleteClient<Restaurant>("http://localhost:3000/restaurants/3aa8");
deleteRestaurantClient.execute().then((restaurant) => {
  if (restaurant) {
    console.log("DELETE Restaurant :", restaurant);

    const readCategories = new ReadClient<Category[]>("http://localhost:3000/categories");
    readCategories.execute().then((categories) => {
      if (categories) {
        categories.forEach((c) => {
          if (c.restaurantIds?.includes(restaurant.id!)) {
            const updated = c.restaurantIds.filter((id) => id !== restaurant.id);
            new UpdateClient<Category>(\`http://localhost:3000/categories/\${c.id}\`, {
              restaurantIds: updated,
            }).execute();
          }
        });
      }
    });

    const readRelations = new ReadClient<RestaurantCategory[]>("http://localhost:3000/restaurantCategories");
    readRelations.execute().then((relations) => {
      if (relations) {
        const filtered = relations.filter((rel) => rel.restaurantId !== restaurant.id);
        new UpdateClient<RestaurantCategory[]>("http://localhost:3000/restaurantCategories", filtered).execute();
      }
    });
  }
});`}</code></pre> <p>
üîÅ <strong>Remarque</strong> : chaque op√©ration <code>DELETE</code> d√©clenche la mise √† jour des entit√©s li√©es (restaurants ou cat√©gories), puis la mise √† jour des relations dans <code>restaurantCategories</code>.
</p> <p>
Ce fonctionnement garantit la coh√©rence des relations m√™me apr√®s suppression ou modification de donn√©es.
</p> </article>    </section><section id="17_forms" class="exercise-section"> <h3>17 forms</h3>                 <article> <h4>üìù Question :</h4> <p>
Cr√©ez une application c√¥t√© serveur (car l'API bloque en CORS) qui utilise l'API REST publique OpenAQ
      (<a href="https://docs.openaq.org/" target="_blank">https://docs.openaq.org/</a>). Cette API fournit des donn√©es sur la qualit√© de l'air dans le monde entier.
</p> <p>
Vous devez d'abord vous inscrire sur le site (et valider votre email) pour obtenir une cl√© d'acc√®s API, qui sera disponible dans "Mon compte" une fois connect√©.
</p> <p>L'application doit :</p> <ul> <li>Afficher un formulaire demandant √† l'utilisateur d'entrer un code pays (comme FR, CN, US).</li> <li>Faire une requ√™te GET √† l'API pour r√©cup√©rer une liste des stations (locations) du pays saisi.</li> <li>Afficher cette liste dans une liste d√©roulante ou √©quivalente.</li> <li>Quand l'utilisateur s√©lectionne une station, faire une autre requ√™te GET pour r√©cup√©rer les mesures de qualit√© de l'air correspondantes.</li> <li>Afficher les mesures dans un tableau : nom du polluant, valeur mesur√©e, et unit√©.</li> <li>Actualiser les donn√©es √† intervalles r√©guliers avec <code>setInterval</code>.</li> <li>Afficher une erreur si le pays est invalide ou non trouv√©.</li> </ul> <h4>‚úÖ R√©ponse :</h4> <p>
Voici un exemple d'impl√©mentation avec <strong>Bun</strong> c√¥t√© serveur. Copiez le code suivant dans un fichier
<code>server.ts</code> puis ex√©cutez-le avec <code>bun server.ts</code> :
</p> <pre><code class="language-ts">import { serve } from &quot;bun&quot;;

const OPENAQ_API_KEY = &quot;VOTRE_CL√â_API_ICI&quot;; // Remplacez par votre cl√© API personnelle
const PORT = 3000;

const HTML = `
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;fr&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;Recherche de sites OpenAQ&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Recherche des stations de surveillance OpenAQ par pays&lt;/h1&gt;
  &lt;label for=&quot;country&quot;&gt;Entrez le code du pays (ex : FR, CN, US) :&lt;/label&gt;
  &lt;input type=&quot;text&quot; id=&quot;country&quot; placeholder=&quot;FR&quot; /&gt;
  &lt;button onclick=&quot;fetchLocations()&quot;&gt;Rechercher&lt;/button&gt;

  &lt;ul id=&quot;results&quot;&gt;&lt;/ul&gt;

  &lt;script&gt;
    async function fetchLocations() {
      const country = document.getElementById(&quot;country&quot;).value;
      const resultsEl = document.getElementById(&quot;results&quot;);
      resultsEl.innerHTML = &quot;Chargement en cours...&quot;;

      try {
        const res = await fetch(&quot;/locations?country=&quot; + country);
        if (!res.ok) {
          resultsEl.innerHTML = &quot;√âchec de la recherche : &quot; + await res.text();
          return;
        }

        const data = await res.json();
        resultsEl.innerHTML = &quot;&quot;;
        data.forEach(loc =&gt; {
          const li = document.createElement(&quot;li&quot;);
          li.textContent = loc.name + &quot; (ID : &quot; + loc.id + &quot;)&quot;;
          resultsEl.appendChild(li);
        });
      } catch (err) {
        resultsEl.innerHTML = &quot;Erreur : &quot; + err.message;
      }
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
`;

async function fetchOpenAQData(endpoint: string, params: Record&lt;string, string&gt;) {
  const url = new URL(`https://api.openaq.org/v3/${endpoint}`);
  Object.entries(params).forEach(([key, value]) =&gt; 
    url.searchParams.append(key, value));

  const response = await fetch(url, {
    headers: {
      &quot;X-API-Key&quot;: OPENAQ_API_KEY,
    }
  });

  if (!response.ok) throw new Error(await response.text());
  return response.json();
}

serve({
  port: PORT,
  async fetch(req) {
    const url = new URL(req.url);

    if (url.pathname === &quot;/&quot;) {
      return new Response(HTML, {
        headers: { &quot;Content-Type&quot;: &quot;text/html&quot; }
      });
    }

    if (url.pathname === &quot;/locations&quot;) {
      try {
        const country = url.searchParams.get(&quot;country&quot;) || &quot;&quot;;
        const data = await fetchOpenAQData(&quot;locations&quot;, {
          country,
          limit: &quot;100&quot;
        });

        if (data.results.length === 0) {
          return new Response(&quot;Country not found&quot;, { status: 404 });
        }

        return Response.json(data.results.map(location =&gt; ({
          id: location.id,
          name: location.name
        })));
      } catch (error: any) {
        return new Response(error.message, { status: 500 });
      }
    }

    if (url.pathname === &quot;/measurements&quot;) {
      try {
        const locationId = url.searchParams.get(&quot;locationId&quot;) || &quot;&quot;;
        const data = await fetchOpenAQData(&quot;measurements&quot;, {
          location_id: locationId,
          limit: &quot;10&quot;,
          sort: &quot;desc&quot;
        });

        return Response.json(data.results);
      } catch (error: any) {
        return new Response(error.message, { status: 500 });
      }
    }

    return new Response(&quot;Not found&quot;, { status: 404 });
  }
});

console.log(`Serveur lanc√© sur http://localhost:${PORT}`);
</code></pre> <p><strong>üí° Astuce :</strong> vous pouvez tester l'application en tapant <code>FR</code>, <code>CN</code> ou <code>US</code> dans le champ de recherche. Si l'API renvoie une erreur, vous verrez un message clair √† l'√©cran.</p> </article>   </section><section id="18_web_components" class="exercise-section"> <h3>18 web components</h3>                  <article> <h4>üìù Question :</h4> <p>
Cr√©ez un nouvel √©l√©ment HTML personnalis√© appel√© <code>&lt;date-time&gt;</code> qui affiche la date et l'heure actuelles.
</p> <p>
Cr√©ez un autre √©l√©ment HTML personnalis√© appel√© <code>&lt;greet-custom&gt;</code> qui affiche un message de salutation personnalis√© en fonction de l'heure de la journ√©e (par exemple, "Bonjour" le matin, "Bon apr√®s-midi" l'apr√®s-midi, "Bonsoir" le soir).
</p> <h4>‚úÖ R√©ponse :</h4> <p>
Comme pour les exercices pr√©c√©dents, commencez par cr√©er un projet Astro. Ensuite, modifiez le fichier <code>src/pages/index.astro</code> pour y inclure les composants personnalis√©s :
</p> <pre><code>---
---
&lt;html lang=&quot;fr&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;Web Components Demo&lt;/title&gt;
    &lt;script type=&quot;module&quot; src=&quot;/src/scripts/app.ts&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;D√©mo des Web Components&lt;/h1&gt;

    &lt;p&gt;Voici la date et l&#39;heure actuelle : &lt;date-time&gt;&lt;/date-time&gt;&lt;/p&gt;

    &lt;p&gt;Message de salutation personnalis√© : &lt;greet-custom&gt;&lt;/greet-custom&gt;&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre> <p>
Ensuite, cr√©ez un fichier <code>src/scripts/app.ts</code> avec le code suivant :
</p> <pre><code class="language-ts">class DateTimeElement extends HTMLElement {
  connectedCallback() {
    this.updateTime();
    setInterval(() =&gt; this.updateTime(), 1000); 
  }

  updateTime() {
    const now = new Date();
    this.textContent = now.toLocaleString(); 
  }
}
customElements.define(&#39;date-time&#39;, DateTimeElement);

class GreetCustomElement extends HTMLElement {
  connectedCallback() {
    const hour = new Date().getHours();
    let greeting = &#39;&#39;;

    if (hour &gt;= 5 &amp;&amp; hour &lt; 12) {
      greeting = &#39;Bonjour&#39;;
    } else if (hour &gt;= 12 &amp;&amp; hour &lt; 18) {
      greeting = &#39;Bon apr√®s-midi&#39;;
    } else {
      greeting = &#39;Bonsoir&#39;;
    }

    this.textContent = `${greeting} !`;
  }
}
customElements.define(&#39;greet-custom&#39;, GreetCustomElement);</code></pre> <p>
üîé <strong>Explication :</strong> </p> <ul> <li><code>&lt;date-time&gt;</code> est mis √† jour automatiquement toutes les secondes avec l'heure locale gr√¢ce √† <code>setInterval()</code>.</li> <li><code>&lt;greet-custom&gt;</code> choisit une salutation en fonction de l'heure du jour via <code>new Date().getHours()</code>.</li> </ul> <p>
Ces deux composants utilisent l'API native <code>customElements.define()</code> pour cr√©er des balises HTML personnalis√©es et dynamiques c√¥t√© client.
</p> </article>  </section> </main> </div>  <!-- È°µÈù¢ÂÜÖÂÆπÊèíÂÖ•ÁÇπ --> </main>  <!-- <!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro Basics</title>
	</head>
	<body>
		<slot />
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style> --></body></html> <!-- <BaseLayout title={pageTitle}>
  <h1>Exercices - WebDev101</h1>
  <p>exxxxxxxererrrrrrrrccccccc</p>
</BaseLayout> -->