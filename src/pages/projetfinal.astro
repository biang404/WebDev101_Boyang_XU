---
// 原始 Frontmatter
import BaseLayout from '../layouts/Layout.astro';
const pageTitle = "ClimatTrend - Visualisation des Températures Moyennes";
---

<BaseLayout title={pageTitle}>
  <style>
    .container {
      text-align: center;
      padding: 20px;
      font-family: sans-serif;
    }
    canvas {
      max-width: 800px;
      margin: 20px auto;
    }
    input, button {
      padding: 8px;
      font-size: 16px;
      margin: 10px;
    }
    .intro {
      max-width: 800px;
      margin: 0 auto 30px auto;
      font-size: 18px;
      line-height: 1.6;
    }
    .section-header {
      font-size: 20px;
      margin-top: 30px;
    }
  </style>

  <div class="container">
    <h1>🌍 Visualiseur de Tendance Climatique</h1>
    
    <div class="intro">
      <p>
        <strong>ClimatTrend</strong> est un outil interactif conçu pour explorer les tendances climatiques à travers le monde.
        Il vous permet d’analyser l’évolution des températures maximales moyennes sur une décennie (2010–2020), 
        ainsi que de consulter la météo actuelle et les prévisions sur cinq jours dans n’importe quelle ville.
      </p>
      <p>
        Cet outil peut être utile pour les chercheurs, les étudiants, les voyageurs ou toute personne curieuse de mieux comprendre 
        l’évolution du climat dans leur région ou ailleurs.
      </p>
    </div>

    <div>
      <button onclick="switchView('past')">📈 Températures historiques</button>
      <button onclick="switchView('forecast')">🌤️ Prévisions actuelles et sur 5 jours</button>
    </div>

    <!-- Vue des températures passées -->
    <div id="pastView" style="display: none;">
      <p class="section-header">📊 Analyse des températures maximales entre 2010 et 2020</p>
      <p>Veuillez saisir une ville en anglais pour afficher la tendance des températures maximales moyennes sur les dix dernières années.</p>
      <input id="cityInputPast" type="text" placeholder="Ex : Paris" />
      <button id="fetchBtnPast">Afficher la tendance</button>
      <h2 id="locationLabelPast"></h2>
      <canvas id="chart" width="800" height="400"></canvas>
    </div>

    <!-- Vue des prévisions météo -->
    <div id="forecastView" style="display: none;">
      <p class="section-header">🌦️ Météo actuelle et prévisions à 5 jours</p>
      <p>Veuillez saisir une ville en anglais pour consulter la météo actuelle et les prévisions météorologiques des cinq prochains jours.</p>
      <input id="cityInputForecast" type="text" placeholder="Ex : Paris" />
      <button id="fetchBtnForecast">Afficher la météo</button>
      <h2 id="locationLabelForecast"></h2>
      <div id="weatherInfo"></div>
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script type="module" src="/WebDev101_Boyang_XU/scripts/climate.js"></script>
</BaseLayout>

